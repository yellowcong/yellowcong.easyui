(function($){String.prototype.trim=function(){if(this==null){return null}return this.replace(/^(\s*)|(\s*)$/g,"")};String.prototype.equals=function(obj){if(this==null){return null}return this.toString()==obj.toString()};String.prototype.equalsIgnoreCase=function(obj){if(this==null){return null}var _self=this.toLocaleLowerCase();return _self.equals(obj.toLocaleLowerCase())};String.prototype.isEmail=function(){if(this==null){return null}var reg=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00AEW0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/);return reg.test(this)};String.prototype.isUrl=function(){if(this==null){return null}return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/.test(this)};String.prototype.isNum=function(){if(this==null){return null}return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(this)};String.prototype.isIP=function(){if(this==null){return null}var flag=false;var result=this.match(/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/g);if(this==result[0]){flag=true}return flag};String.prototype.isPhone=function(){if(this==null){return null}var flag=false;var result=this.match(/1[358][0-9]{9}/g);if(this==result[0]){flag=true}return flag};String.prototype.isDate=function(){if(this==null){return null}return toString.call(new Date(this))==="[object Date]"};String.prototype.dateParse=function(){var date=new Date();var isSimpleTime=true;if(/\d{1,4}\W\d{1,2}\W\d{1,2} \d{1,2}\W\d{1,2}\W\d{1,2}/.test(this)){var yearFu=this.replace(/\d{1,4}(\W)\d{1,2}\W\d{1,2} \d{1,2}\W\d{1,2}\W\d{1,2}/,"$1");var hourFu=this.replace(/\d{1,4}\W\d{1,2}\W\d{1,2} \d{1,2}(\W)\d{1,2}\W\d{1,2}/,"$1");var dateStr=this.split(" ");var yearArr=dateStr[0].split(yearFu);var hourArr=dateStr[1].split(hourFu);date.setFullYear(yearArr[0],yearArr[1],yearArr[2]);date.setHours(hourArr[0],hourArr[1],hourArr[2],0);isSimpleTime=false}else{if(/\d{1,4}\W\d{1,2}\W\d{1,2}/.test(this)&&isSimpleTime){var fuhao=this.replace(/\d{1,4}(\W)\d{1,2}\W\d{1,2}/,"$1");var dateStr=this.split(fuhao);date.setFullYear(dateStr[0],dateStr[1],dateStr[2]);date.setHours(0,0,0,0)}else{if(toString.call(new Date(this))==="[object Date]"){date=new Date(this)}else{date=null}}}return date};Date.prototype.formate=function(format){if(typeof(format)=="undefined"||format==null||format==""){}var dateStr="";var isSimpleTime=true;var date=this;if(/\w{1,4}\W\w{1,2}\W\w{1,2} \w{1,2}\W\w{1,2}\W\w{1,2}/.test(format)){var yearFu=format.replace(/\w{1,4}(\W)\w{1,2}\W\w{1,2} \w{1,2}\W\w{1,2}\W\w{1,2}/,"$1");var hourFu=format.replace(/\w{1,4}\W\w{1,2}\W\w{1,2} \w{1,2}(\W)\w{1,2}\W\w{1,2}/,"$1");dateStr=date.getFullYear()+yearFu+date.getMonth()+yearFu+date.getDay()+" "+date.getHours()+hourFu+date.getMinutes()+hourFu+date.getSeconds();isSimpleTime=false}else{if(/\w{1,4}\W\w{1,2}\W\w{1,2}/.test(format)&&isSimpleTime){var fuhao=format.replace(/\w{1,4}(\W)\w{1,2}\W\w{1,2}/,"$1");if(format.indexOf("y")==-1){dateStr=date.getHours()+""+fuhao+date.getMinutes()+""+fuhao+date.getSeconds()}else{console.log(date.getDay());dateStr=date.getFullYear()+""+fuhao+date.getMonth()+""+fuhao+date.getDay()
}}}return dateStr};jQuery.toLocalString=function(date){console.log("hello"+date)};jQuery.setDocHeight=function(_self){$("body").append("<input type='hidden' name='docHeight' value='"+$(_self).height()+"'/>")};jQuery.isBoolean=function(obj){return typeof obj==="boolean"};jQuery.isString=function(obj){return typeof obj==="string"};jQuery.isFunction=function(fn){return typeof(fn)==="function"};$.fn.navPage=function(options){var setting=$.extend({title:"全部分类",menus:[{name:"前端开发",url:"#",sub:[{name:"前端基础",url:"#",sub:[{name:"HTML",url:"#"},{name:"CSS",url:"#"},{name:"JavaScript",url:"#"},]}]}]},options||{});var _self=this;var htmlStr=formateHtml(setting.title,setting.menus);_self.html(htmlStr);formateJs(_self);function formateHtml(title,menus){var str='<div class="nav_page"><ul class="nav_page_menus">';str+='<li><a href="#">'+title+"</a></li>";$.each(menus,function(key,val){str+='<li><a href="'+val.url+'">'+val.name+'</a><div class="nav_sub"><div class="nav_sub_content">';var str3="";$.each(val.sub,function(key2,sub){str3+='<div ><dl ><dd class="nav_sub_head"><a href="'+sub.url+'">'+sub.name+'</a></dd><dd  class="nav_sub_body">';$.each(sub.sub,function(key3,val3){str3+='<a href="'+val3.url+'">'+val3.name+"</a>"});str3+="</dd></dl></div>"});str=str+str3+"</div></div></li>"});str+="</ul></div>";return str}function formateJs(_self){_self.find(".nav_page_menus li:first").css("background","none");_self.find(".nav_page_menus li:first").hover(function(){$(this).css({"border-right":"2px solid #35b558"})},function(){$(this).css({"border-right":"1px solid #e4e4e4"})}).click(function(){return false});_self.find(".nav_page_menus li").hover(function(){$(this).find(".nav_sub").show();$(this).css("color","#35b558")},function(){$(this).find(".nav_sub").hide()})}};$.fn.socialConnect=function(options){var setting=$.extend({background:"#008A75",color:"#FFF",menus:[{iconCls:"",href:"",color:"",blank:true},{iconCls:"",href:""}],style:{"fa-envelope":"#466CA3","fa-phone":"#169209","fa-weixin":"#2DCB53","fa-qq":"#5A9EFA","fa-weibo":"red","fa-github":"#82807D"},},options||{});var _self=this;formateHtml(_self,setting.menus);formateJs(_self);function formateHtml(_self,menus){var htmlStr='<div class="social-connect">';$.each(menus,function(key,val){var blank="_blank";if(val.blank!=null&&!val.blank){blank=""}var line='<a class="social-connect-element" style="background:'+setting.background+'" href="'+val.href+'" target="'+blank+'" ><i class="fa '+val.iconCls+' fa-fw" style="color:'+setting.color+'"></i></a>';htmlStr+=line});htmlStr+="</div>";_self.append(htmlStr)}function getBackground(cls){var color="";$.each(setting.menus,function(key,obj){if(obj.iconCls==cls){color=obj.color}});if(color==null||color==""){var styles=setting.style;color=styles[cls]}return color==null||color==""?setting.background:color}function formateJs(_self){_self.find(".social-connect a").hover(function(){var classStr=$(this).find("i").attr("class");classStr=classStr.substring(classStr.indexOf("fa")+3,classStr.indexOf("fa-fw")-1);var style=setting.style;$(this).css("background",getBackground(classStr.trim()))},function(){_self.find(".social-connect a").css("background",setting.background)})}};$.fn.drawSkillsArc=function(options){var setting=$.extend({name:"技能",showTitle:true,info:"总有刁民\n想害朕",menu:[{title:"",score:100,color:"",subtitle:[{title:"",score:""},{title:"",score:""}]},{title:"",score:"",color:"",subtitle:[{title:"",score:""},{title:"",score:""}]}],font:"Hiragino Sans GB, Microsoft YaHei, sans-serif"},options||{});var _self=this;formateHtml(_self);var paper=Raphael("skillsArc",830,500);drawSkillsArc(paper);function drawSkillsArc(paper){paper.circle(250,250,5).attr({stroke:"none",fill:"#193340"}).animate({r:85},1000,">");var name=paper.text(250,250,setting.name).attr({font:"20px Hiragino Sans GB, Microsoft YaHei, sans-serif",fill:"#fff"}).toFront();var content=paper.set();var u=paper.circle(702,20,5).attr({stroke:"none",fill:"#228fbd"}),a=paper.path("M 702 20 L 702 20").attr({fill:"none",stroke:"#228fbd","stroke-width":1}).animate({path:"M702 20 L 702 180"},1000,">",drawInfo(paper,content));content.push(a);content.push(u);setTimeout(drawCircle(paper,name,content),1500)}function drawCircle(paper,name,content){paper.customAttributes.arc=function(score,color,r){var result=3.6*score;if(result==360){result=359.99}var i=(90-result)*Math.PI/180;var x=250+r*Math.cos(i);var y=250-r*Math.sin(i);circle=[["M",250,250-r],["A",r,r,0,+(result>180),1,x,y]];return{path:circle,stroke:color}};var r=73;var xy=250;var menus=setting.menu;for(var i=0;i<menus.length;i++){var menu=menus[i];var id="arc-"+menu.title.toLowerCase().replace("&","_");r+=30;var circle=paper.path().attr({arc:[menu.score,menu.color,r],"stroke-width":26});var date=paper.set();circle.node.id=id,function(menu,title,score){o("mouseover",circle),o("mouseout",circle),circle.mouseover(function(){this.animate({"stroke-width":50,opacity:0.75},1000,"elastic");Raphael.type!="VML"&&this.toFront(),name.stop().animate({opacity:0},r,">",function(){this.attr({text:title+"\n"+score+"%"}).animate({opacity:1},r,"<")
});var subtitles=menu.subtitle;var d=30,v=550,m=150,g=v+10;for(var j=0;j<subtitles.length;j++){sub=subtitles[j];var c=d+10,y=paper.rect(v,m+c*j,1,d).attr({fill:menu.color,stroke:"none"}).animate({width:sub.score},2000*Math.random(),"bounce"),b=paper.text(g,c*j+m+d/2,sub.title).attr({"font-size":20,fill:"#fff","font-family":setting.font,"text-anchor":"start"});date.push(y);date.push(b)}content.forEach(function(e){var t=Raphael.animation({opacity:0},500,">");e.stop().animate(t)})});circle.mouseout(function(){this.stop().animate({"stroke-width":26,opacity:1},r*4,"elastic");name.stop().animate({opacity:0},r,">",function(){name.attr({text:setting.name}).animate({opacity:1},r,"<")});if(date.length>0){date.forEach(function(obj){obj.remove()});date.clear()}content.forEach(function(e){var t=Raphael.animation({opacity:1},1000,">");e.stop().animate(t)})})}(menu,menu.title,menu.score)}}function drawInfo(paper,content){var t={fill:"#228fbd",stroke:"none",transform:"t615 180"},n=paper.path("M86.112,80.5 86.892,81.191 87.847,80.774 88.374,81.673 89.411,81.572 89.635,82.589 90.653,82.813 90.551,83.851 91.45,84.378 91.033,85.333 91.725,86.112 91.033,86.892 91.45,87.847 90.551,88.374 90.653,89.411 89.635,89.635 89.411,90.653 88.374,90.551 87.847,91.45 86.892,91.033 86.112,91.725 85.333,91.033 84.378,91.45 83.851,90.551 82.813,90.653 82.589,89.635 81.572,89.411 81.673,88.374 80.774,87.847 81.191,86.892 80.5,86.112 81.191,85.333 80.774,84.378 81.673,83.851 81.572,82.813 82.589,82.589 82.813,81.572 83.851,81.673 84.378,80.774 85.333,81.191 z").attr(t).animate({path:"M86.112,0 98.071,10.609 112.723,4.214 120.818,18 136.728,16.446 140.167,32.057 155.778,35.497 154.224,51.406 168.011,59.501 161.616,74.154 172.225,86.112 161.616,98.071 168.011,112.723 154.224,120.818 155.778,136.728 140.167,140.167 136.728,155.778 120.818,154.224 112.723,168.011 98.071,161.616 86.112,172.225 74.154,161.616 59.501,168.011 51.406,154.224 35.497,155.778 32.057,140.167 16.446,136.728 18,120.818 4.214,112.723 10.609,98.071 0,86.112 10.609,74.154 4.214,59.501 18,51.406 16.446,35.497 32.057,32.057 35.497,16.446 51.406,18 59.501,4.214 74.154,10.609 z"},2000,"bounce").hover(function(){this.animate({fill:"#005687",path:"M86.112,-16 100.293,-3.42 117.667,-11.003 127.267,5.345 146.132,3.502 150.211,22.014 168.723,26.093 166.879,44.958 183.228,54.557 175.645,71.932 188.225,86.112 175.645,100.293 183.228,117.667 166.879,127.267 168.723,146.132 150.211,150.211 146.132,168.723 127.267,166.879 117.667,183.228 100.293,175.645 86.112,188.225 71.932,175.645 54.557,183.228 44.958,166.879 26.093,168.723 22.014,150.211 3.502,146.132 5.345,127.267 -11.003,117.667 -3.42,100.293 -16,86.112 -3.42,71.932 -11.003,54.557 5.345,44.958 3.502,26.093 22.014,22.014 26.093,3.502 44.958,5.345 54.557,-11.003 71.932,-3.42"},1000,"bounce")},function(){this.animate({fill:"#228fbd",path:"M86.112,0 98.071,10.609 112.723,4.214 120.818,18 136.728,16.446 140.167,32.057 155.778,35.497 154.224,51.406 168.011,59.501 161.616,74.154 172.225,86.112 161.616,98.071 168.011,112.723 154.224,120.818 155.778,136.728 140.167,140.167 136.728,155.778 120.818,154.224 112.723,168.011 98.071,161.616 86.112,172.225 74.154,161.616 59.501,168.011 51.406,154.224 35.497,155.778 32.057,140.167 16.446,136.728 18,120.818 4.214,112.723 10.609,98.071 0,86.112 10.609,74.154 4.214,59.501 18,51.406 16.446,35.497 32.057,32.057 35.497,16.446 51.406,18 59.501,4.214 74.154,10.609 z"},1000,"bounce")});content.push(n),setTimeout(function(){var t=paper.text(703,250,setting.info).attr({"font-size":22,fill:"#fff","font-family":setting.font});content.push(t)},1000)}function formateHtml(_self){var skillStr=formateSkillHtml(setting.menu);var htmlStr='<div  class="skill"><div class="inner">';var title="";if(setting.showTitle){title='<h2 class="animated">'+setting.name+"</h2>"}htmlStr=htmlStr+title+'<div class="legend"><h3 class="animated">图例:</h3>';htmlStr=htmlStr+skillStr+'</div><div id="skillsArc"></div></div></div>';_self.html(htmlStr);_self.find(".legend h3").addClass("fadeInUp"),_self.find(".skillsList li").each(function(e){var t=$(this);setTimeout(function(){t.addClass("fadeInLeftBig")},e*200)});_self.find(".skillsList li").hover(function(){var e="arc-"+$(this).text().toLowerCase();e=e.replace(/&/,"_"),$("#"+e).trigger("mouseover")},function(){var e="arc-"+$(this).text().toLowerCase();e=e.replace(/&/,"_"),$("#"+e).trigger("mouseout")})}function formateSkillHtml(menu){var skillStr='<ul class="skillsList">';$.each(menu,function(key,val){skillStr+='<li class="animated" style="background:'+val.color+';">'+val.title+"</li>"});skillStr+="</ul>";return skillStr}function o(e,t){t.node["on"+e]=function(){for(var n=0,r=t.events.length;n<r;n++){t.events[n].name==e&&t.events[n].f.call(t)}}}};$.fn.drawExperienceTimeLine=function(options){var setting=$.extend({autoHeight:true,height:680,width:900,info:"",legend:[{color:"",title:""},{color:"",title:""}],exp:[[{date:"",title:"",blank:"",weight:1},{date:"",title:"",blank:""}],[]],line:{fill:"none","stroke-dasharray":"- ",stroke:"#000","stroke-width":1},font:{"title":{"font-size":16,fill:"#898989","font-family":"Hiragino Sans GB, Microsoft YaHei, sans-serif","text-anchor":"start"},"date":{"font-size":14,fill:"#649996","font-family":"Hiragino Sans GB, Microsoft YaHei, sans-serif","text-anchor":"start"},"blank":{"font-size":14,fill:"#898989","font-family":"Hiragino Sans GB, Microsoft YaHei, sans-serif","text-anchor":"start"}}},options||{});
var line=setting.line;var id=$(this).attr("id");var height=setting.height;if(setting.autoHeight){height=getPaperHeight()}var paper=new Raphael(id,setting.width,height);var font=setting.font;paper.text(0,40,setting.info).attr(font.title);drawLegend(paper,setting.legend,font);drawLine(paper,font,setting.legend,setting.exp);function drawLine(paper,font,legends,exp){var yDate=getY();paper.path("M 130 95").attr(line).animate({path:"M 130 50 L 170 50 176 43 182 60 188 50 260 50 300 95 385 0"},1000,"elastic",function(){var maxHeight=getPaperHeight();paper.path("M300  L 300 130").attr(line).animate({path:"M300 95 L 300 "+(maxHeight-50)+" 350 "+maxHeight,},1000,"backOut");var index=0;var i=0;$.each(exp,function(key,val){$.each(val,function(key,obj){var y=yDate[index];var color=legends[i].color;var weight=obj.weight;if(weight==null||weight<=0){weight=1}var r=weight*10;paper.circle(300,1500,r).attr({stroke:"none",fill:color}).animate({cy:y},1000+1000*Math.random(),"backOut").hover(function(){this.animate({r:r*1.5},500,"bounce")},function(){this.animate({r:r},500,"bounce")});paper.text(360,1500,obj.date).attr(font.date).animate(Raphael.animation({y:y},1000,"backOut").delay(1000));paper.text(360,1500,obj.title).attr(font.title).animate(Raphael.animation({y:y+25},1000,"backOut").delay(1000));if(obj.blank==null){obj.blank=""}paper.text(360,1500,obj.blank).attr(font.blank).animate(Raphael.animation({y:y+50},1000,"backOut").delay(1000));index++});i++})})}function drawLegend(paper,legends,font){var xDate=getX();for(i=0;i<legends.length;i++){var legend=legends[i];var r=10;var x=xDate[i][0];var y=xDate[i][1];paper.circle(x,y*30,r).attr({stroke:"none",fill:legend.color}).hover(function(){this.animate({r:r*1.5},500,"bounce")},function(){this.animate({r:r},500,"bounce")});paper.text(x+15,y*30,legend.title).attr(font.title)}}function getPaperHeight(){var height=setting.height;var countHeight=(getLegendCount()-1)*80+50+95;if(height>countHeight&&!setting.autoHeight){return height}else{return countHeight}}function getX(){var len=setting.legend.length;var count=(setting.width-400)/100;var xDate=new Array();for(var i=0;i<len;i++){var page=parseInt(((i)/count))+1;xDate[i]=[(400+(i%count)*100),page]}return xDate}function getLegendCount(){var index=0;$.each(setting.exp,function(){$.each($(this),function(){index++})});return index}function getY(){var height=getPaperHeight();var exp=setting.exp;var expDate=new Array();var index=0;$.each(exp,function(){$.each($(this),function(){expDate[index]=getPropCount($(this));index++})});var heightDate=new Array();heightDate[0]=95;for(var i=0;i<expDate.length-2;i++){var len=0;if(expDate[i]==2&&!setting.autoHeight){len=heightDate[i]+60}else{len=heightDate[i]+80}heightDate[i+1]=len}heightDate[expDate.length-1]=height-50;return heightDate}function getPropCount(obj){var count=0;obj=obj[0];$.each(obj,function(key,val){if(key!="weight"){if(obj[key]!=null&&obj[key]!=""){count++}}});return count}};$.fn.tabs=function(options){var setting=$.extend({},options||{})};$.fn.prettify=function(options){var setting=$.extend({linenums:true,trans:true,selectors:[]},options||{});var _self=this;createCode(_self,setting);function transCode(code){var date=code.split("<");var codeStr="";$.each(date,function(key,val){if(key==0){codeStr=codeStr+val}else{codeStr=codeStr+"&lt;"+val}});date=codeStr.split(">");var len=date.length-1;codeStr="";$.each(date,function(key,val){codeStr=codeStr+val;if(key!=len){codeStr=codeStr+"&gt;"}});return codeStr}function formateCode(_self,linenums,trans){var date=$(_self).html();if(trans){date=transCode(date)}if(linenums){date='<pre class="prettyprint linenums">'+date}else{date='<pre class="prettyprint">'+date}date+="</pre>";return date}function createCode(_self,setting){var selectors=setting.selectors;if(selectors!=null&&selectors.length>0){$.each(selectors,function(key,_self){var date=formateCode(_self,setting.linenums,setting.trans);$(_self).html(date)})}prettyPrint();formateStyle(_self)}function formateStyle(_self){$("body").find("pre ol li").hover(function(event){$(this).css({"background":"#EEE","cursor":"pointer"})},function(){$(this).css("background","#F9F9F9")})}};$.fn.dropmenu=function(options){var setting=$.extend({width:60,height:30,align:"left",menuWidth:160,menu:[{title:"",iconCls:""}],},options||{});_self=this;createDropMenu(_self,setting.menu,setting.width,setting.height,setting.menuWidth);function createDropMenu(_self,menu,width,height,menuWidth){_self.append(formateDropMenu(menu,width,height,menuWidth))}function formateDropMenu(menu,width,height,menuWidth){var menuStr="";if(menu!=null&&menu.length>0){menuStr=menuStr+'<span class="input-group-btn " >'+'<button class="btn btn-danger dropdown-toggle" data-toggle="dropdown" type="button"  style="width:'+width+"px;height:"+height+'px;align:center;font-size:12px;">所有<i class="fa fa-filter fa-fw"></i></button>'+'<ul class="dropdown-menu" style="width:'+menuWidth+'px">';$.each(menu,function(key,val){if(val.iconCls){menuStr+='<li ><i class="fa '+val.iconCls+' fa-fw"></i>'+val.title+"</li>"
}else{menuStr+='<li><i class=""></i>'+val.title+"</li>"}});menuStr+="</ul></span>"}return menuStr}};$.fn.menubutton=function(options){var setting=$.extend({width:"auto",},options||{})};$.fn.navs=function(options){var setting=$.extend({height:30,width:250,direction:"vertical",menu:[{title:"",iconCls:"",href:"",subMenu:[{title:"",iconCls:"",href:""}]}],},options||{});var _self=this;var menus=setting.menu;var htmlStr=formateNavs(_self,menus);_self.html('<div class="nav_left_list" style="width:'+setting.width+'px;">'+htmlStr+"</div>");formateStyle(_self);function formateJs(_self){}function formateStyle(_self){var isOpen=false;var lastClick=null;_self.find(".nav_list_navs a").hover(function(){var is_sub=$(this).parent().parent("ul").hasClass("sub_navs");if(is_sub){$(this).css("color","#E74C3C")}else{$(this).addClass("navs_select")}},function(){var is_sub=$(this).parent().parent("ul").hasClass("sub_navs");if(is_sub){$(this).css("color","#fff")}else{$(this).removeClass("navs_select")}});_self.find(".sub_navs").hide();_self.find(".nav_list_navs li a:not(.sub_navs li a)").click(function(){var is_sub=$(this).parent().parent("ul").hasClass("sub_navs");if(!is_sub){isOpen=!isOpen;$(this).addClass("navs_select_active");if(lastClick!=$(this).children("span").html()){if(lastClick!=null){_self.find(".sub_navs").slideUp();_self.find(".drop-icon").removeClass("nav_show_select");setColorByName(_self,lastClick)}lastClick=$(this).children("span").html()}$(this).css("border-bottom","1px solid #374D63");$(this).siblings(".sub_navs").slideToggle();$(this).children(".drop-icon").toggleClass("nav_show_select")}return false})}function setColorByName(_self,name){$.each(_self.find(".nav_list_navs a"),function(key,val){var title=$(this).children("span:first").html();if(title==name){$(this).removeClass("navs_select_active");return false}})}function formateNavs(_self,menus){var navsStr='<ul class="nav_list_navs">';$.each(menus,function(key,nav){var navStr='<li><a href="'+nav.href+'"> <i class="fa '+nav.iconCls+' fa-fw nav_icon"></i>'+'<span class="nav_text">'+nav.title+"</span>";if(nav.subMenu!=null&&nav.subMenu.length>0){navStr+='<i class="fa fa-chevron-circle-right drop-icon"></i></a><ul class="sub_navs">';var subMenuStr="";$.each(nav.subMenu,function(index,subMenu){subMenuStr+='<li><a href="'+subMenu.href+'"> <i class="fa '+subMenu.iconCls+' fa-fw"></i>'+"<span>"+subMenu.title+"</span></a></li>"});navStr=navStr+subMenuStr+"</ul></li>"}else{navStr+="</a></li>"}navsStr+=navStr});navsStr+="</ul>";return navsStr}function getMenus(){var navs=_self.find(".nav_list_navs li:not(.sub_navs li)");var objs=new Array();var j=0;$.each(navs,function(){var obj={};var title=$(this).find("span").html();var iconCls=$(this).find("i")[0];iconCls=$(iconCls).attr("class");iconCls=iconCls.substring(iconCls.indexOf("fa")+3,iconCls.indexOf("fa-fw"));obj.title=title;obj.iconCls=iconCls;obj.href="";var subNavs=$(this).find(".sub_navs li");var subMenus=null;if(subNavs.length>0){subMenus=new Array();var i=0;$.each(subNavs,function(){var title=$(this).find("span").html();var iconCls=$(this).find("i")[0];iconCls=$(iconCls).attr("class");iconCls=iconCls.substring(iconCls.indexOf("fa")+3,iconCls.indexOf("fa-fw"));var subMenu={};subMenu.title=title;subMenu.iconCls=iconCls;subMenu.href="";subMenus[i]=subMenu;i++})}obj.subMenu=subMenus;objs[j]=obj;j++});return objs}};$.fn.searchbox=function(options){var setting=$.extend({height:30,width:400,prompt:"输入关键字...",menu:[{title:"",iconCls:""}],searcher:function(value,name){}},options||{});var _self=this;createBox(_self);function createBox(_self){var box=formateBox(setting.menu,setting.prompt,setting.width,setting.height);_self.append(box)}function formateBox(menu,prompt,width,height){var boxStr='<div class="table_search_menu" style="width:'+width+'px;">'+'<div class="input-group input-group-sm input_group_small"  style="line-height: '+height+'px;">';boxStr=boxStr+formateDropMenu(menu);boxStr=boxStr+'<input type="text"  class="form-control" placeholder="'+prompt+'"/>'+'<span class="input-group-btn">'+'<button class="btn btn-success">查询<i class="fa fa-search fa-fw"></i></button>'+"</span></div></div>";return boxStr}function formateDropMenu(menu){var menuStr="";if(menu!=null&&menu.length>0){menuStr=menuStr+'<span class="input-group-btn ">'+'<button class="btn btn-danger dropdown-toggle" data-toggle="dropdown" type="button">所有<i class="fa fa-filter fa-fw"></i></button>'+'<ul class="dropdown-menu">';$.each(menu,function(key,val){if(val.iconCls){menuStr+='<li><i class="fa '+val.iconCls+' fa-fw"></i>'+val.title+"</li>"}else{menuStr+='<li><i class=""></i>'+val.title+"</li>"}});menuStr+="</ul></span>"}return menuStr}};$.fn.layout=function(options){var setting=$.extend({width:"auto",},options||{})};$.fn.pagination=function(options){var setting=$.extend({total:6,pageSize:10,pageNumber:1,conf:{},pageList:[10,20,30,40,50],selector:null,pager:{"pageSize":10,"pageNow":1,"pageCount":6,"rowCount":21,"data":[]}},options||{});var _self=this;var result=formatePager(setting.pager,setting.pageList,setting.pager.pageCount);
_self.html(result);formatePageJs(_self);formateSelector(_self);formateSpanJs(_self);function formateSelector(_self){_self.find("select").change(function(){var pageSize=$(this).val();var url=setting.conf.url;if(url.indexOf("?")==-1){url=url+"?pageSize="+pageSize;console.log(url)}else{var urlStr=url.split("?");url=urlStr[0]+"?pageSize="+pageSize+"&pageNow=1"}setting.conf.url=url;$(setting.datagrid).datagrid("load",setting.conf,setting.selector);updateIndex(_self,1);var pageCount=parseInt((setting.pager.rowCount-1)/pageSize)+1;var htmlStr=formatePagination(pageCount,false);_self.find(".table_pagination").html(htmlStr);setting.pager.pageCount=pageCount;setting.pager.pageSize=pageSize;formatePageJs(_self);updatePageCount(_self,pageCount);console.log(url)})}function updateRowCount(_self,rowCount){_self.find(".table_pager_info_rowcount").html(rowCount)}function updatePageCount(_self,pageCount){_self.find(".table_pager_info_pagecount").html(pageCount)}function formateSpanJs(_self){_self.find(".table_pager_info a").click(function(event){var href=$(this).attr("href");var date=$(this).html();var newIndex=1;var index=_self.find(".table_pager_info input:hidden").val();if(date=="«"){if(index<=1){return false}newIndex=index-1;href=href+newIndex}else{if(date=="»"){var count=setting.pager.pageCount;newIndex=parseInt(index)+1;if(index==count){return false}href=href+newIndex}}console.log(href);updatePage(_self,newIndex,setting.pager.pageCount);updateIndex(_self,newIndex);setting.conf.url=href;$(setting.datagrid).datagrid("load",setting.conf,setting.selector);event.preventDefault();return false})}function formatePageJs(_self){_self.find(".table_pagination li a").click(function(){var href=$(this).attr("href");var date=$(this).html();var newIndex=1;var index=_self.find(".table_pager_info input:hidden").val();if(date=="«"){if(index<=1){return false}newIndex=index-1;href=href+newIndex;updatePage(_self,newIndex,setting.pager.pageCount)}else{if(date=="»"){var count=setting.pager.pageCount;newIndex=parseInt(index)+1;if(index==count){return false}href=href+newIndex;updatePage(_self,newIndex,setting.pager.pageCount)}else{newIndex=getHrefIndex(href);if(newIndex==index){return false}}}updateIndex(_self,newIndex);setting.conf.url=href;$(setting.datagrid).datagrid("load",setting.conf,setting.selector);return false})}function getHrefIndex(href){return href.substring(href.indexOf("pageNow=")+8)}function updateIndex(_self,pageNow){_self.find(".table_pager_info input").val(pageNow)}function updatePage(_self,pageNow,pageCount){if(pageCount<5){return false}var urls=_self.find(".table_pagination li a");var date=$(urls[1]).attr("href");date=date.substring(0,date.indexOf("pageNow=")+8);var lastIndex=$(urls[urls.length-2]).attr("href");lastIndex=getHrefIndex(lastIndex);var firstIndex=$(urls[1]).attr("href");firstIndex=getHrefIndex(firstIndex);pageNow=parseInt(pageNow);var pages=null;if(pageNow>=lastIndex){if(pageCount==pageNow){pages=[pageNow-4,pageNow-3,pageNow-2,pageNow-1,pageNow]}else{if(pageCount<pageNow+2){pages=[pageNow-3,pageNow-2,pageNow-1,pageNow,pageNow+1]}else{pages=[pageNow-2,pageNow-1,pageNow,pageNow+1,pageNow+2]}}}if(pageNow<=firstIndex){if(pageNow<=3){pages=[1,2,3,4,5]}else{pages=[pageNow-2,pageNow-1,pageNow,pageNow+1,pageNow+2]}}if(pages!=null){for(var i=1;i<6;i++){$(urls[i]).html(pages[i-1]).attr("href",date+pages[i-1])}}}function formatePager(pager,pageList,pageCount){var url=setting.conf.url;var pageStr='<div class="table_pager">'+'<div class="table_pager_info">当前页面'+'<a href="'+url+"?pageNow="+'" class="btn btn-sm btn-default btn-prev">«</a>'+'<input type="hidden" value="'+pager.pageNow+'" maxlength="5" class="form-control input-mini input-inline input-sm text-center input_small_pager"/>'+'<input type="text" value="'+pager.pageNow+'" maxlength="5" class="form-control input-mini input-inline input-sm text-center input_small_pager"/>'+'<a href="'+url+"?pageNow="+'" class="btn btn-sm btn-default btn-next">»</a>'+'<span>共<i class="table_pager_info_pagecount">'+pager.pageCount+"</i>页 | 每页显示</span>";pageStr+=formateSelect(pageList);pageStr+='<span>记录 | 共有<i class="table_pager_info_rowcount">'+(pager.rowCount)+"</i>条记录</span>	</div>";pageStr+=formatePagination(pageCount);pageStr+="</div>";return pageStr}function formateSelect(pageList){var selectStr='<select name="pageSize" class=" form-control input_small input_small_pagers  text-center ">';$.each(pageList,function(key,val){selectStr+="<option value='"+val+"'>"+val+"</option>"});return selectStr+"</select>"}function formatePagination(pageCount,hasNode){var pStr='<div class="table_pagination pull-right"><ul class="pagination pagination-sm man">';if(hasNode!=null&&!hasNode){pStr='<ul class="pagination pagination-sm man">'}var url=setting.conf.url;if(url.indexOf("pageNow=")!=-1){url=url.substring(0,url.indexOf("pageNow=")-1)}var isPageSize=false;if(url.indexOf("pageSize=")!=-1){isPageSize=true}var count=pageCount;if(pageCount>5){count=5}if(isPageSize){pStr+='<li><a href="'+url+"&pageNow="+'">«</a></li>';
for(var i=1;i<=count;i++){pStr+='<li><a href="'+url+"&pageNow="+i+'">'+i+"</a></li>"}pStr=pStr+'<li><a href="'+url+"&pageNow="+'">»</a></li></ul>'}else{pStr+='<li><a href="'+setting.conf.url+"?pageNow="+'">«</a></li>';for(var i=1;i<=count;i++){pStr+='<li><a href="'+setting.conf.url+"?pageNow="+i+'">'+i+"</a></li>"}pStr=pStr+'<li><a href="'+setting.conf.url+"?pageNow="+'">»</a></li></ul>'}if(hasNode!=null&&!hasNode){return pStr}pStr+="</div>";return pStr}};$.fn.navTop=function(options){var setting=$.extend({names:[{href:"#",title:"首页",select:true},{href:"#",title:"前端开发"},{href:"#",title:"后端开发"},{href:"#",title:"云计算"},{href:"#",title:"大数据"},{href:"#",title:"虚拟化"},{href:"#",title:"登录",tips:true},{href:"#",title:"站长",tips:true}],logo:"url",cname:"",ename:""},options||{});var _self=this;var str=formateHtml();_self.append(str);nav();function formateHtml(){var str=formateWarp(setting.names);str+=formateNavLeft(setting.logo,setting.cname,setting.ename);return str}function formateWarp(names){var str='<div class="head_content"><div class="head-warp"><div class="head"><div class="nav-box"><ul>';$.each(names,function(key,val){if(!val.tips){if(val.select){str+='<li class="cur"><a href="'+val.href+'">'+val.title+"</a></li>"}else{str+='<li><a href="'+val.href+'">'+val.title+"</a></li>"}}else{str+='<li class="last"><a href="'+val.href+'" target="_blank">'+val.title+" </a></li>"}});str+='</ul><div class="nav-line"></div></div></div></div>';return str}function formateNavLeft(logo,cname,ename){var str='<div class="logo"><div  class="content"><div class="font_logo">'+'<img   src="'+logo+'"/>';if(ename==""){str+='<div class="no_ename"><span class="cn_name">'+cname+"</span>"+'<div class="en_name">'+ename+"</div></div></div></div>"}else{str+='<div class="name"><span class="cn_name">'+cname+"</span>"+'<div class="en_name">'+ename+"</div></div></div></div></div>"}return str}function nav(){var $liCur=$(".nav-box ul li.cur"),curP=$liCur.position().left,curW=$liCur.outerWidth(true),$slider=$(".nav-line"),$targetEle=$(".nav-box ul li:not('.last') a"),$navBox=$(".nav-box");$slider.stop(true,true).animate({"left":curP,"width":curW});$targetEle.mouseenter(function(){var $_parent=$(this).parent(),_width=$_parent.outerWidth(true),posL=$_parent.position().left;$slider.stop(true,true).animate({"left":posL,"width":_width},"fast")});$navBox.mouseleave(function(cur,wid){cur=curP;wid=curW;$slider.stop(true,true).animate({"left":cur,"width":wid},"fast")})}function nav2(){var $liCur=$(".nav-box ul li.cur"),curP=$liCur.position().left,curW=$liCur.outerWidth(true),$slider=$(".nav-line"),$targetEle=$(".nav-box ul li:not('.last') a"),$navBox=$(".nav-box");$slider.stop(true,true).animate({"left":curP,"width":curW});$targetEle.mouseenter(function(){console.log("xx");var $_parent=$(this).parent(),_width=$_parent.outerWidth(true),posL=$_parent.position().left;$slider.stop(true,true).animate({"left":posL,"width":_width},"fast")});$navBox.mouseleave(function(cur,wid){cur=curP;wid=curW;$slider.stop(true,true).animate({"left":cur,"width":wid},"fast")})}};$.fn.datagrid=function(options,param,selector){var setting=$.extend({url:"",method:"get",columns:[],rownumbers:true,idField:"id",pagination:true,toolbar:[],fit:true,},options||{});if(typeof options==="string"){if(options=="load"){var _self=selector;load(param,_self)}}function load(param,_self){setting=param;var date=sendAjax(setting.url);var rows=date.data;var bodyStr=makeBodyRows(rows,false);_self.find("tbody").html(bodyStr);var pageNow=date.pageNow;var pageSize=date.pageSize;var start=(pageNow-1)*pageSize+1;formateIndex(start,false);formatTable()}function sendAjax(href){var date=null;$.ajax({url:href,type:setting.method,dataType:"json",async:false,success:function(r){date=r}});return date}if(typeof options!="string"){createTable(this)}function createTable(_self){var date=sendAjax(setting.url+"?pageSize=10");var rows=date.data;var tableStr='<table class="bootstrap_style_table">'+makeHeadRow()+makeBodyRows(rows)+"</table>";_self.append(tableStr);formatePagination(_self,date);formatTable();formatCheckBox();formateIndex(1)}function formatePagination(_self,date){if(setting.pagination){_self.append("<div id='yellowcong_pager'></div>");$("#yellowcong_pager").pagination({pager:date,conf:setting,selector:_self})}}function formateIndex(start,hasthead){if(setting.rownumbers){var thead=$(".bootstrap_style_table thead");var tbody=$(".bootstrap_style_table tbody");var date=thead.find("th:first");if(date.html()!=null&&date.html().indexOf("checkbox")>0){if(hasthead==null||hasthead){date.after("<th width='50px'>编号</th>")}var rows=tbody.find("tr");$.each(rows,function(key,val){$(this).find("td:first").after("<td>"+(start++)+"</td>")})}else{if(hasthead==null||hasthead){date.before("<th  width='50px'>编号</th>")}var rows=tbody.find("tr");$.each(rows,function(key,val){$(this).find("td:first").before("<td>"+(start++)+"</td>")})}}}function formateDate(rows){var formatterFun=getFormatterFun();var obj=new Array();$.each(rows,function(index,row){$.each(formatterFun,function(field,fun){row[field]=fun(row[field],row,index)
});obj[index]=row});return rows}function formateStyle(rows){var styleFun=getStyleFun();var obj=new Array();$.each(rows,function(index,row){var rowNode=tdNodes(setting.columns);$.each(styleFun,function(field,fun){var result=fun(row[field],row,index);if(result){var str=rowNode[field];if(str.indexOf("style")>0){str=str.replace(";'>",";"+result+"'>")}else{str=str.substring(0,str.length-1)+" style='"+result+"'>"}rowNode[field]=str}});obj[index]=rowNode});return obj}function getStyleFun(){var date=setting.columns;var styleFun={};$.each(date,function(key,row){if(row.styler&&!row.hidden){styleFun[row.field]=row.styler}});return styleFun}function getFormatterFun(){var date=setting.columns;var formatterFun={};$.each(date,function(key,row){if(row.formatter){formatterFun[row.field]=row.formatter}});return formatterFun}function formatCheckBox(){var checkboxs=$(".bootstrap_style_table thead tr th:first").find("input:checkbox");if(checkboxs.length){$(".bootstrap_style_table thead tr th:first").css("width","3%")}var isCheck=false;checkboxs.click(function(){if(!isCheck){$(".bootstrap_style_table tbody tr input:checkbox").attr("checked","checked")}else{$(".bootstrap_style_table tbody tr input:checkbox").removeAttr("checked")}isCheck=!isCheck})}function formatTable(){if(setting.fit){$(".bootstrap_style_table").css("width","100%")}$(".bootstrap_style_table tbody tr:even").css("background","#F9F9F9");$(".bootstrap_style_table tbody tr:odd").css("background","#FFF");$(".bootstrap_style_table tbody tr").hover(function(){$(this).css("background","#EEE")},function(){$(this).css("background","none");$(".bootstrap_style_table tbody tr:even").css("background","#F9F9F9");$(".bootstrap_style_table tbody tr:odd").css("background","#FFF")})}function makeHeadRow(){var column=setting.columns;var headRowStr="<thead><tr>";$.each(column,function(key,row){if(!row.hidden){var title=row.title;if(row.checkbox){title='<input type="checkbox"  />'}var rowStart="<th";if(row.width){rowStart=rowStart+" width='"+row.width+"px'"}rowStart=rowStart+">";headRowStr=headRowStr+rowStart+title+"</th>"}});headRowStr=headRowStr+"</tr></tbody>";return headRowStr}function isCheck(field){var result=field.split("_");if("checkbox"==result[result.length-1]){return true}return false}function formatNode(row){var rowStart="<td";if(row.width){rowStart=rowStart+" width='"+row.width+"px'"}if(row.align){rowStart=rowStart+" style='text-align:"+row.align+";'"}rowStart=rowStart+">";return rowStart}function tdNodes(column){var obj={};$.each(column,function(key,row){if(!row.hidden){var tdStartStr="<td>";if(!row.checkbox){tdStartStr=formatNode(row)}obj[row.field]=tdStartStr}});return obj}function getColumnsOrder(column){var rowOrder=new Array();$.each(column,function(key,row){if(!row["hidden"]){var result=row.field;if(row["checkbox"]){result=result+"_checkbox"}rowOrder[key]=result}});return rowOrder}function makeBodyRows(rows,hasNode){var rowOrder=getColumnsOrder(setting.columns);rows=formateDate(rows);var nodes=formateStyle(rows);var rowsStr="";if(hasNode==null||hasNode){rowsStr+="<tbody>"}$.each(rows,function(index,row){var rowStr="<tr>";$.each(rowOrder,function(key,field){if(!field==null||!field==""){var cellStr=row[field];if(isCheck(field)){field=field.replace("_checkbox","");cellStr='<input type="checkbox" name="select" value="'+row[setting.idField]+'"/>'}rowStr=rowStr+nodes[index][field]+cellStr+"</td>"}});rowStr=rowStr+"</tr>";rowsStr=rowsStr+rowStr});if(hasNode==null||hasNode){rowsStr=rowsStr+"</tbody>"}return rowsStr}}})(jQuery);